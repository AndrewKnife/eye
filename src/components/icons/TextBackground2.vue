<template>
  <svg version="1.1" id="koldunas" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
       viewBox="0 0 1474.3 995.1" style="enable-background:new 0 0 1474.3 995.1;">
    <path id="pupuilasonas" transform="scale(0.8)" fill="none" stroke-linejoin="round" d="M148.4,395.5c15.3-26.4,4.2-59.7-18.6-80.1c-22.7-20.4-52.3-35.7-64.4-63.7c-12.9-29.9,1.6-68.8,31-82.9
		c29.4-14.1,68.8-1.1,84,27.7c19.1,36.1,0.5,81.3,10.4,121c7.5,29.9,30.3,53.4,54.1,73.1c124.1,103.1,299,141.6,455,100.2
		c27.3-7.3,57.3-19.8,67.2-46.3c12-32.1-12.3-67-41-85.7c-102.5-66.9-247.2-11.6-357-65.8c-25.6-12.6-49.1-32-59.8-58.4
		c-20.6-50.7,4.9-123.7-41.2-153.4c-21.1-13.6-47.3-10-73.3-6.9c-23.7,2.7-28.9-32.5-5.4-36.5c60.5-10.3,129.4,18.8,154.7,75.9
		c8.9,20,12.9,42,22.7,61.6c18.2,36.2,57,61.1,97.4,62.6c15.4,0.6,31.1-2.1,44.5-9.7c28.2-16.1,40.2-49.6,56.1-77.9
		c18.1-32.2,47.7-62.2,84.7-64.2c36.9-2,74,38.8,57,71.6c-3.9,7.6-10.1,13.9-13.6,21.7c-11,24.6,12.7,54.9,39.6,55.9
		s50.8-20.9,59-46.5s3.7-53.7-4.9-79.2c-5.4-15.9-7.9-33.8,2.8-46.7c31.2-37.5,77.7-29.5,141.6-4.2c22.7,9,41.4,26.8,53,48.2
		c10.3,19.1,6.8,42.8-0.7,63.1c-18.1,48.9-58.8,88.8-107.9,106.1c-35.5,12.5-82.9,21.7-88.9,58.8c-2.3,14.4,3.1,28.8,9.5,41.9
		c31.2,64.1,87,120.2,90.5,191.4c1.5,30.7-4.7,67.7,19.5,86.5c17.8,13.9,43.4,9.6,65.1,3.3c76.4-22.2,147.5-62.3,206.1-116
		c39.8-36.5,76.2-89.8,59.2-141.1c-19.4-58.8-82.9-88.6-122.3-136.4c-44.7-54.3-42-129.9-7.9-188.7c35.4-60.9,106.9-50.2,154.7-43.9
		c37.1,4.9,67.9,18.9,72.4,46.9c7.2,44.7-75.6,65.5-67.4,110.1c2.1,11.6,10.7,21.2,20.6,27.7c28.7,18.7,70.7,13.1,93.4-12.5
		c45.3-51,10.7-152,70.3-185.4c17.1-9.6,38.3-9.9,57.1-4.5c56.4,16.2,89,80.3,84.4,138.8c-4.6,58.5-38.5,110.8-78.4,153.7
		c-39.9,43-86.6,79.3-125.3,123.3c-43.5,49.3-76.3,107.9-95.8,170.7c-14,45.3-19.3,99.8,12.1,135.3c15.1,17.1,36.6,27.1,58.4,34
		c56.1,17.7,117.9,17.1,173.6-1.8c28.4-9.6,57.2-26,68.4-53.8c13.4-33.1-2.4-69.9-9.2-104.9c-21.3-109.2,45.8-216,51.6-327.1
		c3.2-61.9-12.2-127.7,14.2-183.7c3.1-6.6,42.9-64.7,82.5-12.3c45.2,59.9,79.9,41.9,97.1,89.1s-32.4,113.3-58.6,156.3
		c-20.7,34-55.1,71.8-37,107.3c10.3,20.2,33.8,29,53.4,40.4c46.8,27,79.7,83.9,64.5,135.8c-20.7,70.3-107.7,92-163.6,139.3
		c-16.3,13.8-31.3,34.4-25.3,54.9c4.2,14.3,17.7,23.9,31.2,30.3c30.4,14.4,65.7,17.6,98.5,10.3c37.7-8.4,71.1,25.3,62.6,62.9
		c-10.1,44.7-41,86.9-81,110.9c-27.5,16.5-60,26.8-91.7,22c-41.9-6.3-75.6-37.3-102.8-69.8c-27.2-32.5-51.7-68.6-87-92
		c-35.3-23.4-86.1-30.5-118.3-2.9c-14.6,12.6-23.4,30.4-34.3,46.3c-22.8,33.3-59.9,60.2-100.2,58.3c-56.5-2.7-96.7-60.5-104-116.6
		s8.5-112.3,15.2-168.5c2.2-18.9,0.9-42.7-16.4-50.6c-13.1-6-28.2,0.9-40.6,8.2c-52.9,31.4-98.7,74.9-132.9,126.1
		c-33.7,50.6-55,120.7-19.6,170.1c14.1,19.7,34.4,32.2,56.4,42.9c28.9,14,16.3,57.9-15.6,54.3c-21-2.3-41.8-5.9-62.4-10.8
		c-34.3-8.1-72.4-24.1-82.3-57.9c-6.7-22.8,1.6-46.9,7.5-70c21.6-85.6,6.6-179.9-40.6-254.5c-18.5-29.3-43.9-57-77.6-65.2
		c-20.3-5-41.7-2.3-62.1,2.5c-56.7,13.5-117.3,60.6-104.6,117.5c10.5,47.3,63.6,68.8,106.2,91.9c13,7,26,15.3,33.6,28
		c7.5,12.7,8.5,28.2,7.4,42.9c-3.9,49.3-32.9,97.5-77.7,118.6c-44.8,21.1-104.1,10.5-134.5-28.6c-22.2-28.6-27.1-66.6-40.2-100.4
		c-13.1-33.8-42.7-67.6-78.7-62.9c-35.9,4.6-55.6,43.9-65.1,78.8c-9.5,34.9-17.8,74.8-48.4,94.2c-31.1,19.7-73,9.2-103.9-10.8
		C96.5,917.3,61.9,816.6,90.8,733.5c18.6-53.4,66.5-100.3,123-100.7c31.1-0.2,60.4,13.1,89.7,23.6c52.2,18.7,107.4,28.9,162.8,30.2
		c25.2,0.6,53.1-1.8,70.6-20c20.4-21.2,18-57.1,1.8-81.7c-16.1-24.6-42.7-40.2-69-53.4c-57.3-28.8-120.6-50.9-184.4-44.8
		c-45.9,4.4-71.4,23.5-124.5,36.2c-40.4,9.7-124,12.8-139.7-33.3c-6.7-19.9-6.7-67.8,42.7-73C91.8,413.7,135.4,417.8,148.4,395.5z"/>
    <text>
      <textPath id="textMan" xlink:href="#pupuilasonas" startOffset="0%" v-html="iconText">
      </textPath>
    </text>
  </svg>
</template>
<script setup>
import {useI18n} from "vue-i18n";
import {onMounted, ref} from "vue";
import {randomInteger} from "@/utls/randomInteger";

const {t} = useI18n()

const props = defineProps({slower: Number})

let i = 0;
const textRaw = 'Aš esu kūrėjas, kuris bando suvokti pasaulį ir savo vietą jame. Aš esu svajotojas, kuris trokšta meilės ir grožio. Aš esu fragmentas, konstruktas, simuliacija, žaidimas. Aš esu tekstas, diskursas, naratyvas, meta-naratyvas. Aš esu ženklas, pėdsakas, pakartojimas, hiperrealybė. Aš esu skirtumas, diferenciacija, dekonstrukcija, diseminacija. Aš esu daugiau nei numeris. Aš esu individualybė, kurios negali apibrėžti jokia sistema ar ideologija. Aš esu kūrybiškas, originalus ir neįprastas. Aš esu atviras, lankstus ir mokantis. Aš esu filosofas, kuris klausia savęs apie gyvenimo prasmę ir vertybes. Aš esu namų šeimininkė, kuri neša savo namus ant pečių ir keliauja po pasaulį. Aš esu nakties tamsybių sklaida, dvelkianti nežinomybės ir paslapčių raštais. Aš esu bespalvė akimirka, sugniaužta tarp praeities prisiminimų ir ateities svajonių, žvaigždės šviesa, sklindanti per neregimo dangaus skylę. Aš esu žingsnis į žingsnį prarasdama save tokiose ribose, kurias pati sukūriau, medžiotoja tarp mirusiųjų tautų, pasislėpusi tamsybės vartuose. Aš esu tyla, kurios siužetą niekas nepajėgs iššifruoti, sapno pabudimas, įsikūnijusi neištikimybės plunksna. Aš esu nerimas, kylantis kaip audros banga, nesibaigiantis ir beviltiškai linksmindamasis. Aš esu prasmės ir beprasmybės susikirtimo mėnulis, ragaujantis paradoksų pasaulyje. Aš esu tuštuma, aukštyn kojomis stovinti keliuose, kurių galas nepasiekiamas. Aš esu amžinai ieškanti siela, tinkanti į neegzistuojančių kelių gūžčius. Aš esu tai, kas gimsta ir miršta tarp žodžių ir jų tylėjimo. Aš esu visa tai ir vis dėlto niekas. Aš esu konstrukcijos kirtiklis, drėgnų cemento maišų kepurėje, kurio galūnės pilkos nuo varginančių pastogės skaldų ir monotoniško kasdienybės pelenų. Aš esu mūrininko įrankių šešėlis, besiilsintis tarp plytų eilučių, kurios skambėjo ankstyvo ryto balsu. Aš esu besiliejančiuose akmenyse slypinčių paslapčių šifruotojas. Aš esu menininkas, kurio plaukai nudažyti suskaldyto ilgesio ir prarastos laimės. Aš esu mūro siena, slepianti savo skilimus ir spėjimus, sugebėjusi atlaikyti laiko ir audrų baleto svyravimus. Aš esu betono grindų ritmas, žengiantis žingsnį po žingsnio, laisvės ilgesį sulaikydamas tarp šaltų paminklų. Aš esu pastato širdis, pulsuojanti krauju. Aš esu tai, kas laiko kartu, kas kuria ir kas lieka.'
const text = t(textRaw);
const iconText = ref('')

// const typeWriter = () => {
//   if (i < text.length) {
//     iconText.value += text.charAt(i);
//     i++;
//     setTimeout(typeWriter, speed);
//   }
// }

const setFullText = () => {
  let tempText = ''
  for (let character of text) {
    tempText += `<tspan style="opacity: 0">${character}</tspan>`
  }
  iconText.value = tempText
}


/*
* startCoordinates: between 0 and 2200
* */
const opacityTrain = (startCoordinates = randomInteger(0, textRaw.length - 200)) => {
  setTimeout(() => {
    const fields = document.getElementById('textMan').getElementsByTagName('tspan')
    let i = startCoordinates
    let finishCoordinates = 0
    let finishing = false
    const runTrain = () => {
      if (i < fields.length) {
        if (!finishing) {
          fields[i].setAttribute('style', `opacity: 1`)
        }
        if (i > 100) {
          const fieldas = fields[i - 101]
          if (fieldas) {
            if (finishCoordinates === i - 101 && finishing) {
              i = 3000
            }
            fieldas.setAttribute('style', `opacity: 0`)
          }
          const tukstantelis = randomInteger(1, 1000)
          if (tukstantelis === 1) {
            finishing = true
            finishCoordinates = i;
          }
        }
        i += 1
        setTimeout(runTrain, 65 + props.slower)
      } else {
        opacityTrain()
      }
    }
    runTrain()
  }, 500)
}

const initOpacitySnakes = () => {
  opacityTrain()
  opacityTrain()
  // setTimeout(opacityTrain)
}

onMounted(() => {
  iconText.value = ''
  setFullText();
  initOpacitySnakes();
})
</script>

<style>
/*tspan {*/
/*  transition: opacity 0ms;*/
/*}*/
</style>